RUTA A SEGUIR EN EL PROYECTO DE RIGO

			
					
				
				
POR DONDE ME LLEGO:   



						>>Revisar como estoy usando tailwind para hacerlo bonito y ver si lo puedo usar en el resto
						
						>REVISAR QUE CUANDO EDITA O CREA UN SERVICIO LOS NUMEROS NO SEAN UY GRANDES O CAMBIAR EL BACKEND
						
						>- en la lista de servicios en las columnas poner para que pueda ordenar de mayor a menor o algo si				
						PUEDO A"ADIR UNA BARRA DE NAVEGACION DONDE IRA EL BOTON DE SALIR -->appbar.component.html
			FACTURA 
						
					--> ver si esta bien hecho el irpf y el iva ..>le he preguntadoa  rigo a ver hay que mirarlo 
					-->mirar para odenar que los servicios con cuadro de chak queden ariba
					>EN La pantalla de facturas pondre algo para eliminar la factura por si se han confundido pero esto tiene que tambien volvera poner los servicos que estuvieran sin factura 
			
			En ENTIDADES 
					|> corregir datos que faltan en viajes y en empresas y servicos y facturas
					|>	>>Probablemete habra que a;adir en los servicios algo del estilo  destino dos (hablar con rigo para ver como funciona eso)	
					
					|> mirar si para meter direciones hay algo como un domi de MD que te saque en la direcion todos los datos como cp ,provincia calle etc-->he visto que si que hay cosas asi que puedo hacerlo una mejor para futuro
					
					-> en la clase usuario meter estos campos para poder sacarlos en la factura
													-Direccion
													-codigo postal y provincia
													-Nombre de la due;a de la empresa o del titular 
													- su dni
													-numero de cuenta
													Volver a poner lo  de por defecto en el registro el rol ROL_USER en el fronted va esto
					-> en la clase empresa a;adir campos para poder meterlos en la factura
														codigo postal 
														provincia
														
					>faltan por a;adir datos a la factura	
					
					. mirar los filtros que se quieren poner como alguno para solo selecionar los viajes por id o algo asi o como sacar algo para que haga un marcado y poder ir selecionando uno a uno 
					
					
					
					
					
					
			COSAS:
				->-- revisar todo el codigo y quitar los log que puedan sacar informacion compromentida
				
				-->Revisar lo de los refresh tokens , son para que el usuario no necesite estar logandose si se acaba el tiempo
				
				
				-->puedo revisar cosas con los roles ,de momento todos se crean en ROLE_USER desde el backend
				
			
									
									
									
									
				REVISIONES FINALES 
						->Al crear o editar una empresa el telefono puede ser mas lasrgo de 9 numeros
						->revisar creacion de la empresa
						
						-->revisar las validaciones al crear o editar empresa y servicios y las demas entidades y ver en que falla y sacar mensajes para que no pete la aplicacion
						

						-->SEGURIDAD DEL BACKEND >>REVISADA
						-->SEGURIDAD DEL FRONTED  voy a meterlo en claude a las 3 para que me lo revise bien
						
			REVISAR ESTO SON FALLOS DEL FRONTED			
						‚ö†Ô∏è 4. DECODIFICACI√ìN INSEGURA DEL TOKEN
typescript// ‚ö†Ô∏è auth.service.ts
getUsuarioId(): number | null {
  const token = this.obtenerToken();
  if (!token) return null;
  try {
    const payload = JSON.parse(atob(token.split('.')[1])); // ‚ùå Sin validaci√≥n
    return payload.usuarioId;
  } catch (error) {
    console.error('Error al decodificar el token:', error);
    return null;
  }
}
Problema: No validas la estructura del token antes de decodificarlo.
Soluci√≥n: Usa una librer√≠a para JWT:
bashnpm install jwt-decode

üêõ OTROS PROBLEMAS DE SEGURIDAD Y BUENAS PR√ÅCTICAS
‚ö†Ô∏è 7. FALTA VALIDACI√ìN EN FORMULARIOS
html<!-- ‚ùå registro.component.html - Sin validaci√≥n real -->
<input type="email" [(ngModel)]="email" name="email" required />
Problema: Usas required en HTML pero no validas en el componente.
Soluci√≥n: Usa Reactive Forms con validaciones:Prepar√≥ validaciones visuales para el c√≥digo HTML.Ahora voy a crear el HTML correspondiente con las validaciones visuales.Prepar√≥ ajustes visuales para componentes de error.Ahora voy a actualizar el CSS para los estilos de error.
‚ö†Ô∏è 8. URL HARDCODEADAS
typescript// ‚ùå URLs duplicadas en todos los servicios
private apiUrl = 'http://localhost:8080/api/usuarios/empresas/';
Soluci√≥n: Usa environment files:environment.ts (CONFIGURACI√ìN CENTRALIZADA)C√≥digo¬†// src/environments/environment.ts
export const environment = {
  production: false,
  apiUrl: 'http://localhost:8080/api',
  tokenKey: 'token'
};

// src/environments/environment.prod.ts
export const environment = {
  production: true,
  apiUrl: 'httypescript// En todos tus servicios
import { environment } from '../../environments/environment';

export class AuthService {
  private readonly API_URL = `${environment.apiUrl}/auth`; // ‚úÖ
}
								
		
								
								
								
											
											
													
													





COSAS PENDIENTES:

	
	-poner algo para que dependiendo el tipo de rol del usuario , pues pueda o no borrar usuarios
	-reevisar el registro por que se pueden crear usuarios vacios ejemplo id 13  --> esto sigue pasando solo que si no se crea es por que ya hay uno con el nombre vaacio
	
	-revisar la creacion de facturas pues si falla no crea la factura pero al crear la sigueinte el id a saltado uno ya 
	
	
	
	
	
	
		
				 
				 
	
	
				 
	
	
	
	
	
	
	
	
	
	
	
	REVISAR ESTO EN UN FUTUTO,-->vale , lo unico me acabo de dar cuenta de un eeror que no se como solucionar ,yo en mi aplicacion al logearme me genera un token y ese toquen tiene aceso a todos los usuarios , 
				a mi me gustaria es que al logearme con un usuario solo tuviera aceso a los datos de ese usuario


	  
IDEAS A FUTURO:
	-->buenas , tengo una duda , tengo un backend en springboot con java , hay alguna forma de poder hacer una aplicacion movil que tire contra eso? -->la idea es intentar hacer una aplicacion movil que pueda tirar de esos endpoints
	
	
		FUTURO:
üì± 7. App m√≥vil (futuro) Tienes dos opciones:
			-PWA desde Angular (r√°pido)
			-App nativa usando Ionic + Angular

Ambas consumen tu API de Spring.

üîê 10. Roles y permisos Spring Security ya permite:  ADMIN,USER,CONDUCTOR,CLIENTE

Frontend oculta/ense√±a botones seg√∫n rol.

üí∞ 9. Control de costes

Solo necesitas a√±adir nuevas entidades:

Gasto

TipoGasto

GastoVehiculo

GastoViaje

Y relacionarlas.



3. Gesti√≥n de veh√≠culos

Totalmente factible

A√±adir nueva entidad Vehiculo:

Vehiculo {
   id
   matricula
   modelo
   tipo
   estado
   fechaItv
   fechaMantenimiento
}


Pantallas en Angular para CRUD + avisos.

üë®‚Äç‚úàÔ∏è 4. Conductores

Ya tienes Usuario, puedes a√±adir:

Campos para documentaci√≥n

Fechas de caducidad

Relaci√≥n con viajes

Todo manejable desde Spring Boot.

	
	
	
	
	
				
				
				
				
				
				
				
				
				
	
	
	
	
	
					


					
					
					
					
					
					
					
					
					
PROBLEMAS QUE HE TENIDO:
si el backend esta guardando los datos en  la base pero el fronted no lo detecta (ejemplo: lo que me ha pasado con el registro que me lo guardaba en la bbdd pero salia el menaje 
en rojo de Error al registrar usuario) esto es por la respuesta que esta mandando el metodo , esta mandando un string o otra cosa en vez de un json, para corregirlo mete esto en 
el return -> Map.of("mensaje","aqui va el texto que tuvieras")
    -->return ResponseEntity.ok(Map.of("mensaje", "Usuario registrado correctamente"));
	
	
	
	
	
	
	
	
	
	
	
	
	Comandos para angular
	# Borrar carpeta node_modules
	Remove-Item -Recurse -Force .\node_modules

	# Borrar package-lock.json
	Remove-Item -Force .\package-lock.json
	
	
	
